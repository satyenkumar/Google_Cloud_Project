source <(kubectl completion bash)

LATEST=1.11.2-gke.15
CLUSTER=boonchu-cluster-1
PROJECT=boonchu-project
ZONE=us-west2-a

# default: gcloud container clusters create boonchu-cluster-1 --num-nodes 2
# machine-type: gcloud compute machine-types list: "n1-standard-1"
# image-type: gcloud container get-server-config: "COS_CONTAINERD"

MACHINE=n1-standard-1
IMAGE=COS_CONTAINERD

gcloud config set project ${PROJECT}
gcloud config set compute/zone ${ZONE}

gcloud beta container clusters create ${CLUSTER} \
--cluster-version=${LATEST} \
--machine-type=${MACHINE} \
--image-type=${IMAGE} \
--num-nodes=1 \
--enable-autorepair \
--enable-autoscaling \
--enable-autoupgrade \
--enable-stackdriver-kubernetes \
--min-nodes=1 \
--max-nodes=2 \
--zone=${ZONE} \
--project=${PROJECT} \
--preemptible \
--scopes="https://www.googleapis.com/auth/cloud-platform"

gcloud container clusters list
gcloud container clusters describe boonchu-cluster-1 | grep -E "zone:|location:"
gcloud compute instances list
